{
  "id": "2018-sales-kickoff-good",
  "description": "Drives Load for DPC hotels APIs",
  "defaultProperties": {
    "scheme": "https",
    "host": "amer-demo4-prod.apigee.net",
    "headers": {
      "Accept": "application/json"
    }
  },

  "geoDistribution": 1,

  "initialContext": {
    "apikeys": [
      ["VktGArEHIr1w5aLDpKp482BWoxDEN1hh", 70],
      ["KFnJ5bjGI4RNoOQh2Pk7VqZKY0ik4WpM", 45],
      ["lQQxMsPzoH3DG2OWtOYz0JdJZG2w0pF2", 17],
      ["invalid-CD50E318321146F3A19C39A3EBDD6E5A", 4]
    ],
    "zipcodes" : [
      ["98101", 35],
      ["90210", 45],
      ["98117", 25],
      ["97201", 15],
      ["98109", 16],
      ["98112", 16],
      ["98112", 16],
      ["98106", 17],
      ["98134", 18],
      ["98106", 4]
    ]
  },

  "invocationsPerHour": [
    1160, 1168, 824, 704, 592, 624, 528, 648,
    624, 632, 856, 880, 992, 856, 952, 1136,
    1152, 800, 768, 752, 832, 1128, 1384, 1328 ],

  "variationByDayOfWeek" : [
    0.725, 0.750, 0.875, 0.825, 0.775, 1.055, 0.974
  ],

  "sequences": [{
    "iterations": "Math.floor(Math.random() * 2) + 3",
    "requests": [{
      "imports": [{
        "description": "source for the request",
        "fn": "function(ctx) {return process.env.APIGEE_ORGANIZATION + ':' + process.env.APIGEE_ENVIRONMENT;}",
        "valueRef": "source"
      }, {
        "description": "setup the weighted random selector",
        "fn": "function(ctx) {return (ctx.kwrs)? ctx.kwrs : new WeightedRandomSelector(ctx.apikeys);}",
        "valueRef": "kwrs"
      }, {
        "description": "choose a key",
        "fn": "function(ctx) {return ctx.kwrs.select()[0];}",
        "valueRef": "apikey"
      },
      {
        "description": "setup the weighted random selector",
        "fn": "function(ctx) {return (ctx.zwrs)? ctx.zwrs : new WeightedRandomSelector(ctx.zipcodes);}",
        "valueRef": "zwrs"
      }, {
        "description": "choose a zip",
        "fn": "function(ctx) {return ctx.zwrs.select()[0];}",
        "valueRef": "zipcode"
      }, {
        "description": "choose a radius",
        "fn": "function(ctx) {return (Math.floor(Math.random() * 80) + 20); }",
        "valueRef": "radius"
      }],
      "url": "/v1/dpc_hotels/hotels?apikey={apikey}&zipcode={zipcode}&radius={radius}",
      "method": "get",
      "headers" : { "X-runload-source" : "{source}"},
      "delayBefore": 0
    }]
  }]
}
